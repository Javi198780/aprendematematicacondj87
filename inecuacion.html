<script>
function resolver(){
    let eq = document.getElementById("ecuacion").value.replace(/\s+/g,"");
    let r = document.getElementById("resultado");

    // Caso 1: ax + b > c
    let regexSimple = /^(-?\d*)x([+-]\d+)([<>]=?)(-?\d+)$/;

    // Caso 2: ax + b > cx + d
    let regexDoble = /^(-?\d*)x([+-]\d+)([<>]=?)(-?\d*)x([+-]\d+)$/;

    let m;

    /* =======================
       CASO SIMPLE
       ======================= */
    if (m = eq.match(regexSimple)) {

        let a = m[1]==="" ? 1 : (m[1]==="-" ? -1 : parseInt(m[1]));
        let b = parseInt(m[2]);
        let signo = m[3];
        let c = parseInt(m[4]);

        let paso1 = `${a}x ${b>=0?"+":""}${b} ${signo} ${c}`;
        let paso2 = c - b;

        let signoFinal = signo;
        if (a < 0) {
            signoFinal = signo === ">" ? "<" :
                         signo === "<" ? ">" :
                         signo === ">=" ? "<=" : ">=";
        }

        let resultado = paso2 / a;

        r.innerHTML = `
        <div class="paso">ğŸ”¹ Paso 1 (inecuaciÃ³n inicial):<br>${paso1}</div>

        <div class="paso">ğŸ”¹ Paso 2 (restamos ${b} en ambos lados):<br>
        ${a}x ${signo} ${paso2}</div>

        <div class="paso">ğŸ”¹ Paso 3 (dividimos para ${a}):<br>
        ${a}x / ${a} ${signo} ${paso2} / ${a}</div>

        <div class="paso">âš ï¸ ${a<0 ? "El signo cambia porque dividimos para negativo" : "El signo se mantiene"}</div>

        <h2>âœ… Resultado final:<br>x ${signoFinal} ${resultado}</h2>
        `;
        return;
    }

    /* =======================
       CASO DOBLE
       ======================= */
    if (m = eq.match(regexDoble)) {

        let a = m[1]==="" ? 1 : (m[1]==="-" ? -1 : parseInt(m[1]));
        let b = parseInt(m[2]);
        let signo = m[3];
        let c = m[4]==="" ? 1 : (m[4]==="-" ? -1 : parseInt(m[4]));
        let d = parseInt(m[5]);

        let d1 = d - b;
        let coef = a - c;
        let signoFinal = signo;

        if (coef < 0) {
            signoFinal = signo === ">" ? "<" :
                         signo === "<" ? ">" :
                         signo === ">=" ? "<=" : ">=";
        }

        let resultado = d1 / coef;

        r.innerHTML = `
        <div class="paso">ğŸ”¹ Paso 1:<br>${a}x ${b>=0?"+":""}${b} ${signo} ${c}x ${d>=0?"+":""}${d}</div>

        <div class="paso">ğŸ”¹ Paso 2 (restamos ${b}):<br>
        ${a}x ${signo} ${c}x ${d1>=0?"+":""}${d1}</div>

        <div class="paso">ğŸ”¹ Paso 3 (restamos ${c}x):<br>
        ${coef}x ${signo} ${d1}</div>

        <div class="paso">ğŸ”¹ Paso 4 (dividimos para ${coef})</div>

        <div class="paso">âš ï¸ ${coef<0 ? "El signo cambia porque dividimos para negativo" : "El signo se mantiene"}</div>

        <h2>âœ… Resultado final:<br>x ${signoFinal} ${resultado}</h2>
        `;
        return;
    }

    r.innerHTML = "âŒ Formato no reconocido. Ejemplo: x+5>4 o 7x+14>4x+8";
}
</script>
